<!--



    Lab 7: 'IWD Postal Service'
    || Hayley Jolliffe, for INFO-1272
    || Due 28 November, 11:59PM



-->

<!DOCTYPE html>
<html>
	<head>
		<title>Postal Service</title>
	</head>
	<body>
		<!-- <image src="iwd_ps_logo.png" width="50%" height="50%" /> -->
		
		<!-- Create Parcel -->
		<fieldset>
			<legend>Create a Parcel</legend>
			<div>
				<strong>Destination: </strong>
				<select id="createParcel_Destination" style="padding-right: 5px;">
					<option>Alberta</option>
					<option>British Columbia</option>
					<option>Manitoba</option>
					<option>New Brunswick</option>
					<option>Newfoundland</option>
					<option>Northwest Territories</option>
					<option>Nova Scotia</option>
					<option>Nunavut</option>
					<option>Ontario</option>
					<option>P.E.I</option>
					<option>Quebec</option>
					<option>Saskatchewan</option>
					<option>Yukon</option>
				</select>
				<strong>Weight (g): </strong>
				<input type="number" id="createParcel_Weight" value=0 style="padding-right: 5px;" />
				<strong>Express Shipping: </strong>
				<input type="checkbox" id="createParcel_expressShipping" style="transform: scale(1.5);" />
				<br>
				<input type="button" value="Create Parcel" onclick="createParcel();" style="margin-top: 10px;" />
			</div>
		</fieldset>
		<br>
		
		<!-- Process Parcel -->
		<fieldset>
			<legend>Process a Parcel</legend>
			<div>
				<strong>Tracking Number: </strong>
				<input type="text" id="tbTrackingNumber" maxlength=13 style="padding-right: 5px;" />
				<strong>Set Status: </strong>
				<select id="processParcel_Status">
					<option>Shipped</option>
					<option>In Transit</option>
					<option>Delivered</option>
				</select>
				<br>
				<input type="button" value="Process Parcel" onclick="processParcel();" style="margin-top: 10px;" />
			</div>
		</fieldset>
		<br>
		
		<!-- Display Parcel -->
		<fieldset>
			<legend>Display Parcels</legend>
			<div style="padding-bottom: 5px;">
				<strong>Status: </strong>
				<select id="displayParcelsFilter" onchange="displayParcels();">
					<option selected>All</option>
					<option>Processing</option>
					<option>Shipped</option>
					<option>In Transit</option>
					<option>Delivered</option>
				</select>
			</div>
			<div style="padding-bottom: 5px;"><strong>Tracking Number | Status | Destination | Weight | Express Shipping</strong></div>
			<div id="displayParcelOutput">[Ouput the list of parcels here]</div>
		</fieldset>
		
		<!-- Javascript -->
		<script>

			// Call DisplayParcels on load
			displayParcels();


			/*
				generateTrackingNumber()
				Purpose: Helper function - generates a random tracking number
				Parameters: none
				Returns: string
			*/
			function generateTrackingNumber()
			{
				const TN_LENGTH = 10;
				const TN_PREFIX = "IWD";
				var tokens = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','1','2','3','4','5','6','7','8','9','0'];
				var trackingNumber = new String(TN_PREFIX);
				for(var x = 0; x < TN_LENGTH; x++) {
					trackingNumber = trackingNumber.concat( tokens[ Math.floor( Math.random() * tokens.length ) ] );
				}
				//console.log("Generated: " + trackingNumber);
				return trackingNumber;
			}
			
            // Creating PARCEL CONSTRUCTOR (Step 3)
            function Parcel(trackingNumber, status, destination, weight, express)
            {
                // PARCEL OBJECT properties
                this.trackingNumber = trackingNumber;
                this.status = status;
                this.destination = destination;
                this.weight = weight;
                this.express = express;
            }

            // Creating global scope PARCEL ARRAY
            var aParcel = [];

            // Creating global scope PARCEL OBJECTS for PARCEL ARRAY
            aParcel[0] = (new Parcel('IWDV3DE6MQGES', 'Processing', 'Ontario', 100, true));
            aParcel[1] = (new Parcel('IWD029HT8KV0S', 'Processing', 'British Columbia', 150, true));
            aParcel[2] = (new Parcel('IWDZY1PHHH0ZP', 'In Transit', 'Alberta', 125, false));

            console.log(aParcel);

            // Creating global scope PARCEL PROPERTIES
            var aStatus = ["Processing", "In Transit", "Shipped", "Delivered"];
            var aDestination = ["Alberta", "British Columbia", "Manitoba", "New Brunswick", "Newfoundland", "Northwest Territories", "Nova Scotia", "Nunavut", "Ontario", "P.E.I", "Quebec", "Saskatchewan", "Yukon"];

            // Creating createParcel() FUNCTION
            function createParcel()
            {
                Parcel();
                var trackingNumber = generateTrackingNumber();
                console.log("Tracking number: " + trackingNumber);
                var status = "Processing";
                var destination = document.getElementById("createParcel_Destination").value;
                var weight = parseInt(document.getElementById("createParcel_Weight").innerHTML) + "g";
                // Checking Express status
                if (document.getElementById("createParcel_ExpressShipping").checked == true)
                {
                    var express = true;
                }
                else if (document.getElementById("createParcel_ExpressShipping").checked /= true)
                {
                    var express = false;
                }
                aParcel.push(new Parcel(trackingNumber, status, destination, weight, express));
                console.log(aParcel);
                displayParcels();
            }

            // Creating displayParcels FUNCTION
            function displayParcels()
            {
                if (document.getElementById(displayParcelsFilter).value == 0)
                {
                    status = aStatus[0];
                }
                else if (document.getElementById(displayParcelsFilter).value == 1)
                {
                    status = aStatus[1];
                }
                else if (document.getElementById(displayParcelsFilter).value == 2)
                {
                    status = aStatus[2];
                }
                else if (document.getElementById(displayParcelsFilter).value == 3)
                {
                    status = aStatus[3];
                }
                document.getElementById("displayParcelOutput").innerHTML = aParcel;
            }

            // Creating processParcel FUNCTION
            function processParcel()
            {

            }
		</script>
	</body>
</html>
